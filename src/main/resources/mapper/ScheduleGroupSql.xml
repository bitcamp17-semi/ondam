<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="data.mapper.ScheduleGroupMapper">
	<!-- 그룹 생성 -->
	<insert id="scheGroupInsert" parameterType="map"  useGeneratedKeys="true" keyProperty="id">
		insert into schedule_group (name, departmentId, ownerId, color, createdAt)
		values (#{name},#{departmentId},#{ownerId},#{color},now())
	</insert>
	
	<!-- 그룹 목록 조회(내가 그룹장이거나 그룹의 멤버인 경우 목록 조회) -->
	<select id="readAllGroup" resultType="ScheduleGroupDto">
	SELECT DISTINCT sg.*
	FROM semi.schedule_group sg
	LEFT JOIN semi.schedule_group_members sgm ON sg.id = sgm.groupId
	WHERE sg.ownerId = #{userId}
   		OR sgm.userId = #{userId}
	ORDER BY sg.createdAt DESC;
	</select>
</mapper>