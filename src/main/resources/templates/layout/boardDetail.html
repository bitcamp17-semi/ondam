<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>게시글 상세보기</title>
	<link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Gaegu&family=Jua&family=Nanum+Pen+Script&family=Playwrite+AU+SA:wght@100..400&family=Single+Day&display=swap" rel="stylesheet">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
   <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
   <link rel="stylesheet" href="/css/board.css">
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
     
   <style>
       body *{
           font-family: 'Jua';
       }
</style>
</head>
<body>
<div class="container">
    <!-- 상단 제목 -->
    <header class="detail-header">
        <h2 th:text="${board.category} + ' > ' + ${board.subcategory}">인사총무</h2>
        <h1 th:text="${board.title}">[안내] 2025년 4월 조식 식단표</h1>
        <div class="post-meta">
            <span th:text="${board.writer}">이온담 매니저</span>
            <span th:text="${#temporals.format(board.createdAt, 'yyyy-MM-dd HH:mm')}">2025-04-03 15:14</span>
            <button class="favorite-button">🤍</button>
        </div>
    </header>

    <!-- 본문 내용 -->
    <section class="post-content">
        <p th:utext="${board.content}">
            안녕하세요. 인사총무팀입니다. 2025년 4월 조식 식단표를 공유드리오니, 참고 부탁드립니다!
        </p>

        <!-- 첨부 파일 -->
        <div class="attachments" th:if="${board.files != null}">
            <h3>첨부파일</h3>
            <ul>
                <li th:each="file : ${board.files}">
                    <a th:href="@{'/download/' + ${file.id}}" th:text="${file.originalFilename}">파일명.pdf</a>
                </li>
            </ul>
        </div>
    </section>

    <!-- 댓글 -->
    <section class="comments">
        <h3>댓글</h3>
        <ul>
            <li th:each="reple : ${reples}">
                <span th:text="${reple.writer}">댓글작성자</span>:
                <span th:text="${reple.content}">댓글 내용</span>
                <span class="comment-date" th:text="${#temporals.format(reple.createdAt, 'MM-dd HH:mm')}">04-03 16:00</span>
            </li>
        </ul>
        <form method="post" th:action="@{/boardReple/write}" th:object="${newReple}">
            <input type="hidden" name="boardId" th:value="${board.id}">
            <textarea name="content" placeholder="댓글을 입력하세요"></textarea>
            <button type="submit">등록</button>
        </form>
    </section>

    <!-- 수정/삭제 버튼 (권한 있을 경우에만 표시) -->
    <div class="actions" th:if="${isAuthorOrAdmin}">
        <button th:onclick="'location.href=\'/boardUpdate/' + ${board.id} + '\''">수정</button>
        <form method="post" th:action="@{/board/delete}">
            <input type="hidden" name="id" th:value="${board.id}">
            <button type="submit" onclick="return confirm('정말 삭제하시겠습니까?')">삭제</button>
        </form>
    </div>
</div>
</body>
</html>